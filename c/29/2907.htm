<!DOCTYPE HTML>
<html>
<HEAD>
<TITLE>Р‘РёР±Р»РёРѕС‚РµС‡РЅС‹Рµ С„СѓРЅРєС†РёРё Little C - cРїСЂР°РІРѕС‡РЅРёРє РїРѕ РЎРё</TITLE>
<meta charset="utf-8"> 
<LINK REL=STYLESHEET TYPE="text/css" HREF="../work/css.css">
</HEAD><BODY>
<A href="../main.htm#29">РЎРѕРґРµСЂР¶Р°РЅРёРµ</A> | <A href="2906.htm">&lt;&lt;&lt;</A> | <A href="2908.htm">&gt;&gt;&gt;</A><HR>
<H1>Р‘РёР±Р»РёРѕС‚РµС‡РЅС‹Рµ С„СѓРЅРєС†РёРё Little C</H1>








<P class="tj">РџСЂРѕРіСЂР°РјРјС‹ РЎ, РІС‹РїРѕР»РЅСЏРµРјС‹Рµ РёРЅС‚РµСЂРїСЂРµС‚Р°С‚РѕСЂРѕРј Little РЎ, РЅРёРєРѕРіРґР° РЅРµ РєРѕРјРїРёР»РёСЂСѓСЋС‚СЃСЏ Рё РЅРµ РєРѕРјРїРѕРЅСѓСЋС‚СЃСЏ, РїРѕСЌС‚РѕРјСѓ Р»СЋР±Р°СЏ РёСЃРїРѕР»СЊР·СѓРµРјР°СЏ РІ РЅРёС… Р±РёР±Р»РёРѕС‚РµС‡РЅР°СЏ С„СѓРЅРєС†РёСЏ РґРѕР»Р¶РЅР° Р±С‹С‚СЊ РѕР±СЂР°Р±РѕС‚Р°РЅР° РЅРµРїРѕСЃСЂРµРґСЃС‚РІРµРЅРЅРѕ РёРЅС‚РµСЂРїСЂРµС‚Р°С‚РѕСЂРѕРј Little РЎ. Р›СѓС‡С€Рµ РІСЃРµРіРѕ РґР»СЏ СЌС‚РѕРіРѕ СЃРѕР·РґР°С‚СЊ РёРЅС‚РµСЂС„РµР№СЃРЅСѓСЋ С„СѓРЅРєС†РёСЋ, РІС‹Р·С‹РІР°РµРјСѓСЋ РёРЅС‚РµСЂРїСЂРµС‚Р°С‚РѕСЂРѕРј РєР°Р¶РґС‹Р№ СЂР°Р· РїСЂРё РІСЃС‚СЂРµС‡Рµ Р±РёР±Р»РёРѕС‚РµС‡РЅРѕР№ С„СѓРЅРєС†РёРё. РРЅС‚РµСЂС„РµР№СЃРЅР°СЏ С„СѓРЅРєС†РёСЏ РѕСЃСѓС‰РµСЃС‚РІР»СЏРµС‚ РїРѕРґРіРѕС‚РѕРІРєСѓ Рє РІС‹Р·РѕРІСѓ Р±РёР±Р»РёРѕС‚РµС‡РЅРѕР№ С„СѓРЅРєС†РёРё Рё РѕР±СЂР°Р±Р°С‚С‹РІР°РµС‚ РІРѕР·РІСЂР°С‰Р°РµРјС‹Рµ Р·РЅР°С‡РµРЅРёСЏ.
<P class="tj">Р’ СЃРІСЏР·Рё СЃ РѕРіСЂР°РЅРёС‡РµРЅРЅС‹Рј СЂР°Р·РјРµСЂРѕРј РёРЅС‚РµСЂРїСЂРµС‚Р°С‚РѕСЂР°, Little РЎ СЃРѕРґРµСЂР¶РёС‚ С‚РѕР»СЊРєРѕ РїСЏС‚СЊ "Р±РёР±Р»РёРѕС‚РµС‡РЅС‹С…" С„СѓРЅРєС†РёР№: <KBD>getche()</KBD>, <KBD>putch()</KBD>, <KBD>puts()</KBD>, <KBD>print()</KBD> Рё <KBD>getnum()</KBD>. РљРѕРЅРµС‡РЅРѕ, РІ РЎС‚Р°РЅРґР°СЂС‚ РЎ РІС…РѕРґРёС‚ С‚РѕР»СЊРєРѕ С„СѓРЅРєС†РёСЏ <KBD>puts()</KBD>, РІС‹РІРѕРґСЏС‰Р°СЏ СЃС‚СЂРѕРєСѓ РЅР° СЌРєСЂР°РЅ. Р¤СѓРЅРєС†РёСЏ <KBD>getche()</KBD>, С…РѕС‚СЏ Рё РЅРµ РїСЂРµРґСѓСЃРјРѕС‚СЂРµРЅР° РІ РЎС‚Р°РЅРґР°СЂС‚Рµ, РѕР±С‹С‡РЅРѕ РІРєР»СЋС‡Р°РµС‚СЃСЏ РІ СЃРѕСЃС‚Р°РІ Р±РёР±Р»РёРѕС‚РµРє, С‚Р°Рє РєР°Рє РѕРЅР° РёСЃРїРѕР»СЊР·СѓРµС‚СЃСЏ РїСЂРё СЂР°Р±РѕС‚Рµ РІ РёРЅС‚РµСЂР°РєС‚РёРІРЅРѕР№ СЃСЂРµРґРµ. РћРЅР° РѕР¶РёРґР°РµС‚ РЅР°Р¶Р°С‚РёСЏ РєР»Р°РІРёС€Рё Рё РІРѕР·РІСЂР°С‰Р°РµС‚ СЃРІСЏР·Р°РЅРЅРѕРµ СЃ РЅРµР№ Р·РЅР°С‡РµРЅРёРµ. РЎР»РµРґСѓРµС‚ РѕС‚РјРµС‚РёС‚СЊ, С‡С‚Рѕ СЌС‚Р° С„СѓРЅРєС†РёСЏ РїСЂРµРґСѓСЃРјРѕС‚СЂРµРЅР° РІРѕ РјРЅРѕРіРёС… РєРѕРјРїРёР»СЏС‚РѕСЂР°С…. Р¤СѓРЅРєС†РёСЏ <KBD>putch()</KBD> С‚Р°РєР¶Рµ РѕРїСЂРµРґРµР»РµРЅР° РІРѕ РјРЅРѕРіРёС… РєРѕРјРїРёР»СЏС‚РѕСЂР°С…, РїСЂРµРґРЅР°Р·РЅР°С‡РµРЅРЅС‹С… РґР»СЏ СЃРѕР·РґР°РЅРёСЏ РїСЂРѕРіСЂР°РјРј, СЂР°Р±РѕС‚Р°СЋС‰РёС… РІ РёРЅС‚РµСЂР°РєС‚РёРІРЅРѕР№ СЃСЂРµРґРµ. РћРЅР° РІС‹РІРѕРґРёС‚ РЅР° РєРѕРЅСЃРѕР»СЊ РѕРґРёРЅ СЃРёРјРІРѕР» вЂ” РµРµ Р°СЂРіСѓРјРµРЅС‚. Р’С‹РІРѕРґ РЅРµ Р±СѓС„РµСЂРёР·РѕРІР°РЅ. Р¤СѓРЅРєС†РёРё <KBD>getnum()</KBD> Рё <KBD>print()</KBD> СЃРѕР·РґР°РЅС‹ Р°РІС‚РѕСЂРѕРј. Р¤СѓРЅРєС†РёСЏ <KBD>getnum()</KBD> РІРѕР·РІСЂР°С‰Р°РµС‚ С†РµР»РѕРµ С‡РёСЃР»Рѕ, СЂР°РІРЅРѕРµ С‡РёСЃР»Сѓ, РІРІРµРґРµРЅРЅРѕРјСѓ СЃ РєР»Р°РІРёР°С‚СѓСЂС‹. Р¤СѓРЅРєС†РёСЏ <KBD>print()</KBD> РјРѕР¶РµС‚ РІС‹РІРѕРґРёС‚СЊ РЅР° СЌРєСЂР°РЅ РєР°Рє СЃС‚СЂРѕРєРѕРІС‹Р№, С‚Р°Рє Рё С†РµР»РѕС‡РёСЃР»РµРЅРЅС‹Р№ Р°СЂРіСѓРјРµРЅС‚, СЌС‚Рѕ РѕС‡РµРЅСЊ СѓРґРѕР±РЅРѕ. РџСЂРѕС‚РѕС‚РёРїС‹ СЌС‚РёС… Р±РёР±Р»РёРѕС‚РµС‡РЅС‹С… С„СѓРЅРєС†РёР№ РїСЂРёРІРµРґРµРЅС‹ РЅРёР¶Рµ<SUP><A href="#11" name="1">[1]</A></SUP>:
<PRE>
/* СЃС‡РёС‚С‹РІР°РЅРёРµ СЃРёРјРІРѕР»Р° СЃ РєР»Р°РІРёР°С‚СѓСЂС‹ Рё РІРѕР·РІСЂР°С‚ РµРіРѕ Р·РЅР°С‡РµРЅРёСЏ */
int getche(void);
/* РІС‹РІРѕРґ СЃРёРјРІРѕР»Р° РЅР° СЌРєСЂР°РЅ */
int putch(char ch);
/* РІС‹РІРѕРґ СЃС‚СЂРѕРєРё РЅР° СЌРєСЂР°РЅ */
int puts(char *s);
/* С‡С‚РµРЅРёРµ С†РµР»РѕРіРѕ С‡РёСЃР»Р° СЃ РєР»Р°РІРёР°С‚СѓСЂС‹ Рё РІРѕР·РІСЂР°С‚ РµРіРѕ Р·РЅР°С‡РµРЅРёСЏ */
int getnum(void);
/* РІС‹РІРѕРґ СЃС‚СЂРѕРєРё РЅР° СЌРєСЂР°РЅ */
int print(char *s);
    РёР»Рё
/* РІС‹РІРѕРґ С†РµР»РѕРіРѕ С‡РёСЃР»Р° РЅР° СЌРєСЂР°РЅ */
int print(int i);
</PRE>
<P class="tj">РўРµРєСЃС‚С‹ РїСЂРѕС†РµРґСѓСЂ Р±РёР±Р»РёРѕС‚РµРєРё С„СѓРЅРєС†РёР№ Little РЎ РїСЂРёРІРµРґРµРЅС‹ РЅРёР¶Рµ. Р¤Р°Р№Р» РЅР°Р·С‹РІР°РµС‚СЃСЏ LCLIB.C.
<PRE>
/****** Р‘РёР±Р»РёРѕС‚РµРєР° С„СѓРЅРєС†РёР№ Little C *******/

/* РЎСЋРґР° РјРѕР¶РЅРѕ РґРѕР±Р°РІР»СЏС‚СЊ РЅРѕРІС‹Рµ С„СѓРЅРєС†РёРё. */

#include &lt;conio.h&gt;  /* РµР»Рё РєРѕРјРїРёР»СЏС‚РѕСЂ РЅРµ РїРѕРґРґРµСЂР¶РёРІР°РµС‚
      РґР°РЅРЅС‹Р№ Р·Р°РіРѕР»РѕРІРѕС‡РЅС‹Р№ С„Р°Р№Р», СЌС‚РѕС‚ #include РјРѕР¶РЅРѕ СѓРґР°Р»СЏС‚СЊ */
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

extern char *prog; /* СѓРєР°Р·С‹РІР°РµС‚ РЅР° С‚РµРєСѓС‰РёР№ СЃРёРјРІРѕР» РІ РїСЂРѕРіСЂР°РјРјРµ */
extern char token[80]; /* СЃРѕРґРµСЂР¶РёС‚ СЃС‚СЂРѕРєРѕРІРѕРµ РїСЂРµРґСЃС‚Р°РІР»РµРЅРёРµ Р»РµРєСЃРµРјС‹ */
extern char token_type; /* СЃРѕРґРµСЂР¶РёС‚ С‚РёРї Р»РµРєСЃРµРјС‹ */
extern char tok; /* СЃРѕРґРµСЂР¶РёС‚ РІРЅСѓС‚СЂРµРЅРЅРµ РїСЂРµРґСЃС‚Р°РІР»РµРЅРёРµ Р»РµРєСЃРµРјС‹ */

enum tok_types {DELIMITER, IDENTIFIER, NUMBER, KEYWORD,
                TEMP, STRING, BLOCK};

/* Р­С‚Рё РєРѕРЅСЃС‚Р°РЅС‚С‹ РёСЃРїРѕР»СЊР·СѓСЋС‚СЃСЏ РґР»СЏ РІС‹Р·РѕРІР° С„СѓРЅРєС†РёРё sntx_err()
   РІ СЃР»СѓС‡Р°Рµ СЃРёРЅС‚Р°РєСЃРёС‡РµСЃРєРѕР№ РѕС€РёР±РєРё. РџСЂРё РЅРµРѕР±С…РѕРґРёРјРѕСЃС‚Рё СЃРїРёСЃРѕРє
   РєРѕРЅСЃС‚Р°РЅС‚ РјРѕР¶РЅРѕ СЂР°СЃС€РёСЂРёС‚СЊ.
   Р’РќРРњРђРќРР•: РєРѕРЅСЃС‚Р°РЅС‚Р° SYNTAX РёСЃРїРѕР»СЊР·СѓРµС‚СЃСЏ С‚РѕРіРґР°, РєРѕРіРґР°
   РёРЅС‚РµСЂРїСЂРёС‚Р°С‚РѕСЂ РЅРµ РјРѕР¶РµС‚ РєРІР°Р»РёС„РёС†РёСЂРѕРІР°С‚СЊ РѕС€РёР±РєСѓ.
*/
enum error_msg
     {SYNTAX, UNBAL_PARENS, NO_EXP, EQUALS_EXPECTED,
      NOT_VAR, PARAM_ERR, SEMI_EXPECTED,
      UNBAL_BRACES, FUNC_UNDEF, TYPE_EXPECTED,
      NEST_FUNC, RET_NOCALL, PAREN_EXPECTED,
      WHILE_EXPECTED, QUOTE_EXPECTED, NOT_STRING,
      TOO_MANY_LVARS, DIV_BY_ZERO};

int get_token(void);
void sntx_err(int error), eval_exp(int *result);
void putback(void);

/* РЎС‡РёС‚С‹РІР°РЅРёРµ СЃРёРјРІРѕР»Р° СЃ РєРѕРЅСЃРѕР»Рё. Р•СЃР»Рё РєРѕРјРїРёР»СЏС‚РѕСЂ
   РЅРµ РїРѕРґРґРµСЂР¶РёРІР°РµС‚ _getche(), С‚Рѕ СЃР»РµРґСѓРµС‚
   РёСЃРїРѕР»СЊР·РІР°С‚СЊ getchar() */
int call_getche()
{
  char ch;
  ch = _getche();
  while(*prog!=')') prog++;
  prog++;   /* РїСЂРѕРґРІРёР¶РµРЅРёРµ Рє РєРѕРЅС†Сѓ СЃС‚СЂРѕРєРё */
  return ch;
}

/* Р’С‹РІРѕРґ СЃРёРјРІРѕР»Р° РЅР° СЌРєСЂР°РЅ. */
int call_putch()
{
  int value;

  eval_exp(&value);
  printf("%c", value);
  return value;
}

/* Р’С‹Р·РѕРІ С„СѓРЅРєС†РёРё puts(). */
int call_puts(void)
{
  get_token();
  if(*token!='(') sntx_err(PAREN_EXPECTED);
  get_token();
  if(token_type!=STRING) sntx_err(QUOTE_EXPECTED);
  puts(token);
  get_token();
  if(*token!=')') sntx_err(PAREN_EXPECTED);

  get_token();
  if(*token!=';') sntx_err(SEMI_EXPECTED);
  putback();
  return 0;
}

/* Р’СЃС‚СЂРѕРµРЅРЅР°СЏ С„СѓРЅРєС†РёСЏ РєРѕРЅСЃРѕР»СЊРЅРѕРіРѕ РІС‹РІРѕРґР°. */
int print(void)
{
  int i;

  get_token();
  if(*token!='(')  sntx_err(PAREN_EXPECTED);

  get_token();
  if(token_type==STRING) { /* РІС‹РІРѕРґ СЃС‚СЂРѕРєРё */
    printf("%s ", token);
  }
  else {  /* РІС‹РІРѕРґ С‡РёСЃР»Р° */
   putback();
   eval_exp(&i);
   printf("%d ", i);
  }

  get_token();

  if(*token!=')') sntx_err(PAREN_EXPECTED);

  get_token();
  if(*token!=';') sntx_err(SEMI_EXPECTED);
  putback();
  return 0;
}

/* РЎС‡РёС‚С‹РІР°РЅРёРµ С†РµР»РѕРіРѕ С‡РёСЃР»Р° СЃ РєР»Р°РІРёР°С‚СѓСЂС‹. */
int getnum(void)
{
  char s[80];

  gets(s);
  while(*prog != ')') prog++;
  prog++;  /* РїСЂРѕРґРІРёР¶РµРЅРёРµ Рє РєРѕРЅС†Сѓ СЃС‚СЂРѕРєРё */
  return atoi(s);
}
</PRE>
<P class="tj">Р”Р»СЏ С‚РѕРіРѕ С‡С‚РѕР±С‹ РґРѕР±Р°РІРёС‚СЊ РІ Р±РёР±Р»РёРѕС‚РµРєСѓ РЅРѕРІС‹Рµ С„СѓРЅРєС†РёРё, СЃР»РµРґСѓРµС‚ СЃРЅР°С‡Р°Р»Р° РІРєР»СЋС‡РёС‚СЊ РёС… РёРјРµРЅР° Рё Р°РґСЂРµСЃР° РёРЅС‚РµСЂС„РµР№СЃРЅС‹С… С„СѓРЅРєС†РёР№ РІ РјР°СЃСЃРёРІ <KBD>intern_func</KBD>. РџРѕСЃР»Рµ СЌС‚РѕРіРѕ РЅРµРѕР±С…РѕРґРёРјРѕ СЃРѕР·РґР°С‚СЊ СЃРѕРѕС‚РІРµС‚СЃС‚РІСѓСЋС‰РёРµ РёРЅС‚РµСЂС„РµР№СЃРЅС‹Рµ С„СѓРЅРєС†РёРё, РёСЃРїРѕР»СЊР·СѓСЏ РїСЂРёРІРµРґРµРЅРЅС‹Рµ РІС‹С€Рµ С„СѓРЅРєС†РёРё РєР°Рє РїСЂРёРјРµСЂ.
<P><IMG src="../work/sup.bmp" alt="----------">
<BLOCKQUOTE>
<P class="tj"><SUP><A href="#1" name="11">[1]</A></SUP>РЇР·С‹Рє Little РЎ РЅРµ РїРѕРґРґРµСЂР¶РёРІР°РµС‚ РїСЂРѕС‚РѕС‚РёРїС‹ С„СѓРЅРєС†РёР№. РџРѕСЌС‚РѕРјСѓ РІРєР»СЋС‡Р°С‚СЊ РёС… РІ РїСЂРѕРіСЂР°РјРјСѓ РЅРµ СЃР»РµРґСѓРµС‚. Р—РґРµСЃСЊ РїСЂРѕС‚РѕС‚РёРїС‹ РїСЂРёРІРµРґРµРЅС‹ РІ РєР°С‡РµСЃС‚РІРµ СЃРїСЂР°РІРѕС‡РЅРѕР№ РёРЅС„РѕСЂРјР°С†РёРё.
</BLOCKQUOTE>


<p>






</p>
<small>
 
</small><HR><A href="../main.htm#29">РЎРѕРґРµСЂР¶Р°РЅРёРµ</A> | <A href="2906.htm">&lt;&lt;&lt;</A> | <A href="2908.htm">&gt;&gt;&gt;</A>
</BODY>
</html>

<!DOCTYPE HTML>
<html lang="ru">
<head>
<title>Массивы с переменными границами в качестве членов структур - cправочник по Си</title>
<meta charset="utf-8">
<link rel="stylesheet" href="../work/css.css">
</head>
<body>


<a href="../main.htm#11">Содержание</a> | <a href="1110.htm">&lt;&lt;&lt;</a> | <a href="1112.htm">&gt;&gt;&gt;</a><hr>
<h1>Массивы с переменными границами в качестве членов структур</h1>
<p class='tj'>С99 дает возможность в качестве последнего члена структуры указывать массив без размера. (В структуре перед гибким массивом-членом должен стоять как минимум еше один член.) Он называется <em>членом-массивом с переменными границами</em>. Таким образом, структура может иметь в качестве члена массив переменного размера. В размере такой структуры, возвращаемом <kbd>sizeof</kbd>, память для гибкого массива не учитывается.
<p class='tj'>Обычно память для структуры с членом-массивом с переменными границами распределяется автоматически, с помощью <kbd>malloc()</kbd>. Кроме размера структуры, необходимо еше выделить дополнительную память, чтобы разместить член-массив с переменными границами нужного размера. Например, если имеется следующее определение структуры
<pre>
sturct mystruct {
  int a;
  int b;
  float fa[]; //массив с переменными границами
};
</pre>
<p class='t'>то при выполнении следующего кода будет выделяться место для массива из 10 элементов:
<pre>
struct mystruct *p;
p = (struct mystruct *) malloc(sizof(struct mystuct) + 10 *
sizof(float);)
</pre>
<p class='tj'>Так как <kbd>sizeof (struct mystruct)</kbd> дает значение, в котором не учтен размер памяти для <kbd>fa</kbd>, то при вызове <kbd>malloc()</kbd> с помощью выражения
<pre>10 *sizof(float)</pre>
<p class='t'>дополнительно выделяется место для размещения массива из 10 элементов типа <kbd>float</kbd>.
<hr><a href="../main.htm#11">Содержание</a> | <a href="1110.htm">&lt;&lt;&lt;</a> | <a href="1112.htm">&gt;&gt;&gt;</a>


</body>
</html>

<!DOCTYPE HTML>
<html lang="ru">
<head>
<title>Функция strftime - cправочник по Си</title>
<meta charset="utf-8">
<link rel="stylesheet" href="../work/css.css">
</head>
<body>


<a href="../main.htm#16">Содержание</a> | <a href="16.htm#00">Глава 16</a><hr>
<h1>Функция strftime</h1>
<pre>
#include &lt;time.h&gt;
size_t strftime(char *<em>str</em>, size_t <em>maxsize</em>, const char *<em>fmt</em>,
                const struct tm *<em>time</em>);
</pre>
<p class="tj">Функция <kbd>strftime()</kbd> помещает информацию о времени и дате (вместе с другой информацией) в строку, адресуемую параметром <em>str</em>, в соответствии с командами форматирования, которые содержатся в адресуемой параметром <em>fmt</em> строке. Эта функция использует разделенное на компоненты время, на которое указывает указатель <em>time</em>. В строку <em>str</em> будет помещено не более <em>maxsize</em> символов.
<p class="tj">В версии С99 к параметрам <em>str</em>, <em>fmt</em> и <em>time</em> применен квалификатор <kbd>restrict</kbd>.
<p class="tj">Работа функции <kbd>strftime()</kbd> напоминает работу функции <kbd>sprintf()</kbd> в том, что она распознает набор команд форматирования, которые начинаются со знака процента (%), и помещает отформатированный результат в строку. Команды форматирования используются для задания точного способа представления различных данных времени и даты в параметре <em>str</em>. Любые другие символы, содержащиеся в строке форматирования, помещаются в строку <em>str</em> без изменений. Время и дата отображаются по местному времени. Команды форматирования перечислены в следующей таблице. Обратите внимание на то, что во многих командах прописные и строчные буквы имеют различную интерпретацию.
<p class="tj">Функция <kbd>strftime()</kbd> возвращает количество символов, помещенных в строку, адресуемую параметром <em>str</em>, или нуль при возникновении ошибки.
<table class="table table-bordered">
<tr><th><em>Код</em><th><em>Замещается</em>	
<tr><td>%a<td>Сокращенное название дня недели
<tr><td>%A<td>Полное название дня недели
<tr><td>%b<td>Сокращенное название месяца
<tr><td>%B<td>Полное название месяца
<tr><td>%c<td>Стандартная строка даты и времени
<tr><td>%C<td>Две последние цифры года
<tr><td>%d<td>День месяца в виде десятичного числа (1-31)
<tr><td>%D<td>Дата в виде месяц/день/год (добавлено в версии С99)
<tr><td>%e<td>День месяца в виде десятичного числа (1-31) в двух-символьном поле (добавлено в С99)
<tr><td>%F<td>Дата в виде "год-месяц-день" (добавлено в С99)
<tr><td>%g<td>Последние две цифры года с использованием понедельного года (добавлено в С99)
<tr><td>%G<td>Год с использованием понедельного года (добавлено в С99)
<tr><td>%h<td>Сокращенное название месяца (добавлено в С99)
<tr><td>%Н<td>Час (0-23)
<tr><td>%j<td>Час (1-12)
<tr><td>%j<td>День года в виде десятичного числа (1-366)
<tr><td>%m<td>Месяц в виде десятичного числа (1-12)
<tr><td>%M<td>Минуты в виде десятичного числа (0-59)
<tr><td>%n<td>Разделитель строк (добавлено в С99)
<tr><td>%p<td>Местный эквивалент AM (до полудня) или РМ (после полудня)
<tr><td>%r<td>12-часовое время (добавлено в С99)
<tr><td>%R<td>Время в виде чч:мм (добавлено в С99)
<tr><td>%S<td>Секунды в виде десятичного числа (0-60)
<tr><td>%T<td>Горизонтальная табуляция (добавлено в С99)
<tr><td>%T<td>Время в виде чч:мм:сс (добавлено в С99)
<tr><td>%u<td>День недели; понедельник — первый день недели (0-6) (добавлено в С99)
<tr><td>%U<td>Неделя года; воскресенье — первый день недели (0-53)
<tr><td>%V<td>Неделя года с использованием понедельного года (добавлено в С99)
<tr><td>%w<td>День недели в виде десятичного числа (0-6, воскресенье — 0-й день)
<tr><td>%W<td>Неделя года; понедельник — первый день недели (0-53)
<tr><td>%x<td>Стандартная строка даты
<tr><td>%X<td>Стандартная строка времени
<tr><td>%y<td>Год в виде десятичного числа без столетия (0-99)
<tr><td>%Y<td>Год в вуде десятичного числа, включающего столетие
<tr><td>%z<td>Сдвиг относительно координированного всемирного (UTC) времени (добавлено в С99)
<tr><td>%Z<td>Название часового пояса
<tr><td>%%<td>Знак процента
</table>
<p class="tj">Версия С99 позволяет использовать в функции <kbd>strftime()</kbd> определенные команды форматирования с модификаторами Е и O. Модификатор Е может модифицировать такие команды, как с, C, х, X, у, Y, d, e и H. Модификатор O может модифицировать команды: I, m, M, S, u, U, V, w, W и y. Использование этих модификаторов приводит к альтернативному представлению отображаемого времени и/или даты. За подробностями обращайтесь к документации, поставляемой вместе с используемым вами компилятором.
<p class="tj">Понедельный год используется командами форматирования %g, %G и %V. При таком представлении первым днем недели является понедельник, а первая неделя года должна включать день с датой "4 января".
<h2>Пример</h2>
<p class="tj">Предположим, что <kbd>ltime</kbd> указывает на структуру, которая содержит 10:00:00 AM. Следующая программа печатает: "Сейчас 10 AM.":
<pre>
#include &lt;time.h&gt;
#include &lt;stdio.h&gt;
int main(void)
{
  struct tm *ptr;
  time_t lt;
  char str[80];
  lt = time(NULL);
  ptr = localtime(&lt);
  strftime(str, 100, "Сейчас %H %p.", ptr);
  printf(str);
  return 0;
}
</pre>
<h2>Зависимые функции</h2>
<a href="time.htm">time()</a>  <a href="localtime.htm">localtime()</a>  <a href="gmtime.htm">gmtime()</a>
<p>
</p>
<hr><a href="../main.htm#16">Содержание</a> | <a href="16.htm#00">Глава 16</a>


</body>
</html>

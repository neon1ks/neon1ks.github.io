<!DOCTYPE HTML>
<html lang="ru">
<head>
<title>Функции fprinf() и fscanf() - cправочник по Си</title>
<meta charset="utf-8">
<link rel="stylesheet" href="../work/css.css">
</head><body>
<a href="../main.htm#09">Содержание</a> | <a href="0906.htm">&lt;&lt;&lt;</a> | <a href="0908.htm">&gt;&gt;&gt;</a><hr>
<h1>Функции fprinf() и fscanf()</h1>
<p class="tj">Кроме основных функций ввода/вывода, о которых шла речь, в системе ввода/вывода языка С также имеются функции <kbd>fprintf()</kbd> и <kbd>fscanf()</kbd>. Эти две функции, за исключением того, что предназначены для работы с файлами, ведут себя точно так же, как и <kbd>printf()</kbd> и <kbd>scanf()</kbd>. Прототипы функций <kbd>fprintf()</kbd> и <kbd>fscanf()</kbd> следующие:
<pre>
int fprintf(FILE *<em>уф</em>, const char *<em>управляющая_строка</em>, ...);
int fscanf(FILE *<em>уф</em>, const char *<em>управляющая_строка</em>, ...);
</pre>
<p class="t">где <em>уф</em> — указатель файла, возвращаемый в результате вызова <kbd>fopen()</kbd>. Операции ввода/вывода функции <kbd>fprintf()</kbd> и <kbd>fscanf()</kbd> выполняют с тем файлом, на который указывает <em>уф</em>.
<p class="tj">В качестве примера предлагается рассмотреть следующую программу, которая читает с клавиатуры строку и целое значение, а затем записывает их в файл на диске; имя этого файла — TEST. После этого программа читает этот файл и выводит информацию на экран. После запуска программы проверьте, каким получится файл TEST. Как вы и увидите, в нем будет вполне удобочитаемый текст.
<pre>
/* пример использования fscanf() и fprintf() */
#include &lt;stdio.h&gt;
#include &lt;io.h&gt;
#include &lt;stdlib.h&gt;
int main(void)
{
  FILE *fp;
  char s[80];
  int t;
  if((fp=fopen("test", "w")) == NULL) {
    printf("Ошибка открытия файла.\n");
    exit(1);
  }
  printf("Введите строку и число: ");
  fscanf(stdin, "%s%d", s, &t); /* читать с клавиатуры */
  fprintf(fp, "%s %d", s, t); /* писать в файл */
  fclose(fp);
  if((fp=fopen("test","r")) == NULL) {
    printf("Ошибка при открытии файла.\n");
    exit(1);
  }
  fscanf(fp, "%s%d", s, &t); /* чтение из файла */
  fprintf(stdout, "%s %d", s, t); /* вывод на экран */
  return 0;
}
</pre>
<p class="tj">Маленькое предупреждение. Хотя читать разносортные данные из файлов на дисках и писать их в файлы, расположенные также на дисках, часто легче всего именно с помошью функций <kbd>fprintf()</kbd> и <kbd>fscanf()</kbd>, но это не всегда самый эффективный способ выполнения операций чтения и записи. Так как данные в формате ASCII записываются так, как они должны появиться на экране (а не в двоичном виде), то каждый вызов этих функций сопряжен с определенными накладными расходами. Поэтому, если надо заботиться о размере файла или скорости, то, скорее всего, придется использовать <kbd>fread()</kbd> и <kbd>fwrite()</kbd>.
<p>
</p>
<hr><a href="../main.htm#09">Содержание</a> | <a href="0906.htm">&lt;&lt;&lt;</a> | <a href="0908.htm">&gt;&gt;&gt;</a>
</body>
</html>

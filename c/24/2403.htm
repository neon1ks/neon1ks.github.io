<!DOCTYPE HTML>
<html lang="ru">
<head>
<title>Разбор выражений - cправочник по Си</title>
<meta charset="utf-8">
<link rel="stylesheet" href="../work/css.css">
</head><body>
<a href="../main.htm#24">Содержание</a> | <a href="2402.htm">&lt;&lt;&lt;</a> | <a href="2404.htm">&gt;&gt;&gt;</a><hr>
<h1>Разбор выражений</h1>
<p class="tj">Существуют различные способы синтаксического разбора и вычисления выражений. При работе с рекурсивным нисходящим синтаксическим анализатором можно представлять себе выражения в виде <em>рекурсивных структур данных</em>, т.е. определение выражения рекурсивно. Иными словами, понятие выражения определяется через понятие выражения. Например, если принять, что в выражениях можно использовать только +, -, *, / и скобки, то все выражения можно определить следующими правилами:
<pre>
выражение -&gt; слагаемое [+ слагаемое] [- слагаемое]
слагаемое -&gt; множитель [* множитель] [/ множитель]
множитель -&gt; переменная, число или (выражение)
</pre>
<p class="tj">Квадратные скобки означают необязательный элемент, а символ -&gt; означает "порождает". Подобные правила обычно называются порождающими правилами, или <em>продукциями</em>. Поэтому в качестве определения слагаемого можно привести следующее: "Слагаемое порождает множитель, умноженный на множитель, или множитель, деленный на множитель". Обратите внимание на то, что приоритет операций заложен в определении выражения.
<p class="tj">Давайте рассмотрим пример. Выражение <kbd>10 + 5 * B</kbd> состоит из двух слагаемых: <kbd>10</kbd> и <kbd>5 * В</kbd>. Второе слагаемое состоит из двух множителей: <kbd>5</kbd> и <kbd>B</kbd>. Эти множители представляют собой одно число и одну переменную.
<p class="tj">С другой стороны, выражение <kbd>14 * (7 - С)</kbd> содержит два множителя: <kbd>14</kbd> и <kbd>(7 - С)</kbd>. Эти множители представляют собой одно число и одно выражение в скобках. Выражение в скобках состоит из двух слагаемых: числа и переменной.
<p class="tj">Описанный процесс анализа выражений составляет основу работы рекурсивного нисходящего синтаксического анализатора, который, по существу, состоит из набора взаимно рекурсивных функций, вызывающих друг друга по цепочке. На каждом этапе своей работы анализатор выполняет указанные операции в алгебраически корректной последовательности. Чтобы увидеть, как это происходит, давайте разберем приведенное ниже выражение в соответствии с вышеуказанными порождающими правилами и выполним арифметические операции:
<pre>9 / 3 - (100 + 56)</pre>
<p class="tj">Если выражение разобрано корректно, разбор происходил в следующем порядке:
<ol>
<li class="t">Получить первое слагаемое, 9 / 3.
<li class="t">Получить каждый множитель и выполнить деление чисел. В результате получилось число 3.
<li class="t">Получить второе слагаемое, (100 + 56). В этот момент начинается рекурсивная обработка данного подвыражения.
<li class="t">Получить оба слагаемых и выполнить сложение.  В результате получилось число 156.
<li class="t">Вернуться из рекурсивного вызова и вычесть 156 из 3. Окончательным ответом является -153.
</ol>
<p class="tj">Если вас это несколько сбило с толку, не расстраивайтесь. Синтаксический разбор выражений — довольно сложное занятие, к которому нужно привыкнуть. Необходимо помнить о двух основных моментах, когда речь идет о таком рекурсивном представлении выражений. Во-первых, приоритет операций неявно закладывается в порождающие правила. Во-вторых, этот метод разбора и вычисления выражений очень похож на тот способ, которым люди вычисляют математические выражения.
<p>
</p>
<hr><a href="../main.htm#24">Содержание</a> | <a href="2402.htm">&lt;&lt;&lt;</a> | <a href="2404.htm">&gt;&gt;&gt;</a>
</body>
</html>

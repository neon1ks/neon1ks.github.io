<!DOCTYPE HTML>
<html lang="ru">
<head>
<title>Функция freopen - cправочник по Си</title>
<meta charset="utf-8">
<link rel="stylesheet" href="../work/css.css">
</head><body>
<a href="../main.htm#13">Содержание</a> | <a href="13.htm#00">Глава 13</a><hr>
<h1>Функция freopen</h1>
<pre>
#include &lt;stdio.h&gt;
FILE *freopen(const char *<em>fname</em>, const char *<em>mode</em>, FILE *<em>stream</em>);
</pre>
<p class="tj">Функция <kbd>freopen()</kbd> связывает существующий поток с другим файлом. Имя нового файла задается параметром <em>fname</em>, режим доступа — параметром <em>mode</em>, a переназначаемый поток определяется указателем <em>stream</em>. Возможные значения строки <em>mode</em> — те же, что и для функции <kbd>fopen()</kbd> (полное их описание можно найти в разделе, посвященном описанию <kbd>fopen</kbd>).
<p class="tj">В версии C99 к параметрам <em>fname</em>, <em>mode</em> и <em>stream</em> применен квалификатор <kbd>restrict</kbd>.
<p class="tj">При вызове функция <kbd>freopen()</kbd> сначала пытается закрыть файл, который в данный момент связан с потоком <em>stream</em>. Ho даже если этот файл закрыть не удается, <kbd>freopen()</kbd> открывает другой файл.
<p class="tj">При успешном выполнении функция <kbd>freopen()</kbd> возвращает указатель на поток, а в противном случае — нулевой указатель.
<p class="tj">Чаще всего функция <kbd>freopen()</kbd> используется для перенаправления таких определенных системой файлов, как <kbd>stdin</kbd>, <kbd>stdout</kbd> и <kbd>stderr</kbd>, в какой-то другой.
<h2>Пример</h2>
<p class="tj">Приведенная здесь программа использует функцию <kbd>freopen()</kbd>, чтобы перенаправить поток <kbd>stdout</kbd> в файл с названием OUT. Первое сообщение программы выводится на экран, а второе, перенаправленное, записывается функцией <kbd>freopen()</kbd>, в файл на диске.
<pre>
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
int main(void)
{
  FILE *fp;
  printf("Это сообщение появится на экране.\n");
  if((fp=freopen("OUT", "w" ,stdout))==NULL) {
    printf("Не удается открыть файл.\n");
    exit(1);
  }
  printf("Это сообщение будет записано в файл OUT.");
  fclose(fp);
  return 0;
}
</pre>
<h2>Зависимые функции</h2>
<a href="fopen.htm">fopen()</a>  <a href="fclose.htm">fclose()</a>
<p>
</p>
<hr><a href="../main.htm#13">Содержание</a> | <a href="13.htm#00">Глава 13</a>
</body></html>
<!DOCTYPE HTML>
<html lang="ru">
<HEAD>
<TITLE>Функция gets - cправочник по Си</TITLE>
<meta charset="utf-8"> 
<LINK REL=STYLESHEET TYPE="text/css" HREF="../work/css.css">
</HEAD><BODY>
<A href="../main.htm#13">Содержание</A> | <A href="13.htm#00">Глава 13</A><HR>
<H1>Функция gets</H1>








<PRE>
#include &lt;stdio.h&gt;
char *gets(char *<I>str</I>);
</PRE>
<P class="tj">Функция <KBD>gets()</KBD> читает символы из стандартного потока <KBD>stdin</KBD> и помещает их в массив символов, адресуемый указателем <I>str</I>. Символы читаются до тех пор, пока не встретится разделитель строк или значение <KBD>EOF</KBD>. Вместо разделителя строк в конец строки вставляется нулевой символ, свидетельствующий о ее завершении.
<P class="tj">При успешном выполнении функция <KBD>gets()</KBD> возвращает указатель <I>str</I>, а при сбое — нулевой указатель. Если произошла ошибка, содержимое массива, адресуемого параметром <I>str</I>, не определено. Поскольку функция <KBD>gets()</KBD> возвращает нулевой указатель и при возникновении ошибки, и при достижении конца файла, то для выяснения, что же произошло на самом деле, необходимо использовать функцию <KBD>feof()</KBD> или <KBD>ferror()</KBD>.
<P class="tj">Следует учесть, что нет способа ограничить число символов, которое прочитает функция <KBD>gets()</KBD>. Это означает, что массив, адресуемый указателем <I>str</I>, может переполниться. Следовательно, данная функция опасна по своей природе. Ее следует использовать только в пробных программах иди утилитах "внутреннего" назначения, т.е. для себя. В коммерческих программах эту функцию использовать не рекомендуется.
<H2>Пример</H2>
<P class="tj">В данной программе функция <KBD>gets()</KBD> используется для чтения названия файла.
<PRE>
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

int main(void)
{
  FILE *fp;
  char fname[128];

  printf("Введите имя файла: ");
  gets(fname);

  if((fp=fopen(fname, "r"))==NULL) {
    printf("Не удается открыть файл.\n");
    exit(1);
  }

  fclose(fp);

  return 0;
} 
</PRE>
<H2>Зависимые функции</H2>
<A href="fputs.htm">fputs()</A>  <A href="fgetc.htm">fgetc()</A>  <A href="fgets.htm">fgets()</A>  <A href="puts.htm">puts()</A>


<p>






</p>
<small>
 
</small><HR><A href="../main.htm#13">Содержание</A> | <A href="13.htm#00">Глава 13</A>
</BODY></HTML>
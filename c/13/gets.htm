<!DOCTYPE HTML>
<html lang="ru">
<head>
<title>Функция gets - cправочник по Си</title>
<meta charset="utf-8">
<link rel="stylesheet" href="../work/css.css">
</head><body>
<a href="../main.htm#13">Содержание</a> | <a href="13.htm#00">Глава 13</a><hr>
<h1>Функция gets</h1>
<pre>
#include &lt;stdio.h&gt;
char *gets(char *<em>str</em>);
</pre>
<p class="tj">Функция <kbd>gets()</kbd> читает символы из стандартного потока <kbd>stdin</kbd> и помещает их в массив символов, адресуемый указателем <em>str</em>. Символы читаются до тех пор, пока не встретится разделитель строк или значение <kbd>EOF</kbd>. Вместо разделителя строк в конец строки вставляется нулевой символ, свидетельствующий о ее завершении.
<p class="tj">При успешном выполнении функция <kbd>gets()</kbd> возвращает указатель <em>str</em>, а при сбое — нулевой указатель. Если произошла ошибка, содержимое массива, адресуемого параметром <em>str</em>, не определено. Поскольку функция <kbd>gets()</kbd> возвращает нулевой указатель и при возникновении ошибки, и при достижении конца файла, то для выяснения, что же произошло на самом деле, необходимо использовать функцию <kbd>feof()</kbd> или <kbd>ferror()</kbd>.
<p class="tj">Следует учесть, что нет способа ограничить число символов, которое прочитает функция <kbd>gets()</kbd>. Это означает, что массив, адресуемый указателем <em>str</em>, может переполниться. Следовательно, данная функция опасна по своей природе. Ее следует использовать только в пробных программах иди утилитах "внутреннего" назначения, т.е. для себя. В коммерческих программах эту функцию использовать не рекомендуется.
<h2>Пример</h2>
<p class="tj">В данной программе функция <kbd>gets()</kbd> используется для чтения названия файла.
<pre>
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
int main(void)
{
  FILE *fp;
  char fname[128];
  printf("Введите имя файла: ");
  gets(fname);
  if((fp=fopen(fname, "r"))==NULL) {
    printf("Не удается открыть файл.\n");
    exit(1);
  }
  fclose(fp);
  return 0;
}
</pre>
<h2>Зависимые функции</h2>
<a href="fputs.htm">fputs()</a>  <a href="fgetc.htm">fgetc()</a>  <a href="fgets.htm">fgets()</a>  <a href="puts.htm">puts()</a>
<p>
</p>
<hr><a href="../main.htm#13">Содержание</a> | <a href="13.htm#00">Глава 13</a>
</body></html>
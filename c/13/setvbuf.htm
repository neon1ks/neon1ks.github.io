<!DOCTYPE HTML>
<html lang="ru">
<head>
<title>Функция setvbuf - cправочник по Си</title>
<meta charset="utf-8">
<link rel="stylesheet" href="../work/css.css">
</head>
<body>


<a href="../main.htm#13">Содержание</a> | <a href="13.htm#00">Глава 13</a><hr>
<h1>Функция setvbuf</h1>
<pre>
#include &lt;stdio.h&gt;
int setvbuf(FILE *<em>stream</em>, char *<em>buf</em>, int <em>mode</em>, size_t <em>size</em>);
</pre>
<p class="tj">Функция <kbd>setvbuf()</kbd> позволяет программисту задать буфер, его размер и режим работы с указанным потоком. Массив символов, адресуемый параметром <em>buf</em>, используется в качестве буфера потока для операций ввода/вывода. Размер буфера устанавливается с помощью параметра <em>size</em>, а режим <em>mode</em> определяет, как будет выполняться буферизация. Если параметр <em>buf</em> равен нулю, функция <kbd>setvbuf()</kbd> выделяет собственный буфер.
<p class="tj">В версии C99 к параметрам <em>stream</em> и <em>buf</em> применен квалификатор <kbd>restrict</kbd>.
<p class="tj">Возможными значениями параметра <em>mode</em> являются <kbd>_IOFBF</kbd>, <kbd>_IONBF</kbd> и <kbd>_IOLBF</kbd>, которые определены в заголовочном файле <kbd>&lt;stdio.h&gt;</kbd>. Если параметр mode равен <kbd>_IOFBF</kbd>, для буферизации используется полный объем буфера. Если mode равен <kbd>_IOLBF</kbd>, поток будет буферизирован построчно, т.е. содержимое буфера будет дозаписываться в поток при каждой записи в поток вывода символа новой строки. Содержимое буфера также дозаписывается в поток при заполнении буфера. При чтении из входного потока появление разделителя строк приведет к прекращению подкачки в буфер. Если установлен режим <kbd>_IONBF</kbd>, поток не буферизируется.
<p class="tj">Функция <kbd>setvbuf()</kbd> возвращает нуль при успешном выполнении, а в противном случае ненулевое значение.
<h2>Пример</h2>
<p class="tj">Данный фрагмент программы устанавливает построчный режим вывода потока <kbd>fp</kbd> в буфер размером 128 символов.
<pre>
#include &lt;stdio.h&gt;
char buffer[128];
.
.
.
setbuf(fp, buffer);
</pre>
<h2>Зависимые функции</h2>
<a href="setbuf.htm">setbuf()</a>
<hr><a href="../main.htm#13">Содержание</a> | <a href="13.htm#00">Глава 13</a>


</body></html>
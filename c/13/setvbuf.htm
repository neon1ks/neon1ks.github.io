<!DOCTYPE HTML>
<html lang="ru">
<HEAD>
<TITLE>Функция setvbuf - cправочник по Си</TITLE>
<meta charset="utf-8">
<LINK REL=STYLESHEET TYPE="text/css" HREF="../work/css.css">
</HEAD><BODY>
<A href="../main.htm#13">Содержание</A> | <A href="13.htm#00">Глава 13</A><HR>
<H1>Функция setvbuf</H1>
<PRE>
#include &lt;stdio.h&gt;
int setvbuf(FILE *<I>stream</I>, char *<I>buf</I>, int <I>mode</I>, size_t <I>size</I>);
</PRE>
<P class="tj">Функция <KBD>setvbuf()</KBD> позволяет программисту задать буфер, его размер и режим работы с указанным потоком. Массив символов, адресуемый параметром <I>buf</I>, используется в качестве буфера потока для операций ввода/вывода. Размер буфера устанавливается с помощью параметра <I>size</I>, а режим <I>mode</I> определяет, как будет выполняться буферизация. Если параметр <I>buf</I> равен нулю, функция <KBD>setvbuf()</KBD> выделяет собственный буфер.
<P class="tj">В версии C99 к параметрам <I>stream</I> и <I>buf</I> применен квалификатор <KBD>restrict</KBD>.
<P class="tj">Возможными значениями параметра <I>mode</I> являются <KBD>_IOFBF</KBD>, <KBD>_IONBF</KBD> и <KBD>_IOLBF</KBD>, которые определены в заголовочном файле <KBD>&lt;stdio.h&gt;</KBD>. Если параметр mode равен <KBD>_IOFBF</KBD>, для буферизации используется полный объем буфера. Если mode равен <KBD>_IOLBF</KBD>, поток будет буферизирован построчно, т.е. содержимое буфера будет дозаписываться в поток при каждой записи в поток вывода символа новой строки. Содержимое буфера также дозаписывается в поток при заполнении буфера. При чтении из входного потока появление разделителя строк приведет к прекращению подкачки в буфер. Если установлен режим <KBD>_IONBF</KBD>, поток не буферизируется.
<P class="tj">Функция <KBD>setvbuf()</KBD> возвращает нуль при успешном выполнении, а в противном случае ненулевое значение.
<H2>Пример</H2>
<P class="tj">Данный фрагмент программы устанавливает построчный режим вывода потока <KBD>fp</KBD> в буфер размером 128 символов.
<PRE>
#include &lt;stdio.h&gt;
char buffer[128];
.
.
.
setbuf(fp, buffer);
</PRE>
<H2>Зависимые функции</H2>
<A href="setbuf.htm">setbuf()</A>
<p>
</p>
<HR><A href="../main.htm#13">Содержание</A> | <A href="13.htm#00">Глава 13</A>
</BODY></HTML>
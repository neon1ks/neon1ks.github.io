<!DOCTYPE HTML>
<html lang="ru">
<head>
<title>Функция fgets - cправочник по Си</title>
<meta charset="utf-8">
<link rel="stylesheet" href="../work/css.css">
</head>
<body>


<a href="../main.htm#13">Содержание</a> | <a href="13.htm#00">Глава 13</a><hr>
<h1>Функция fgets</h1>
<pre>
#include &lt;stdio.h&gt;
char *fgets(char *<em>str</em>, int <em>num</em>, FILE *<em>stream</em>);
</pre>
<p class="tj">Функция <kbd>fgets()</kbd> читает из входного потока <em>stream</em> не более <em>num-1</em> символов и помещает их в массив символов, адресуемый указателем <em>str</em>. Символы читаются до тех пор, пока не будет прочитан символ новой строки или значение <kbd>EOF</kbd>, либо пока не будет достигнут заданный предел. По завершении чтения символов сразу же за последним из них размещается нулевой символ. Символ новой строки сохраняется и становится частью массива, адресуемого элементом <em>str</em>.
<p class="tj">В версии C99 к параметрам <em>str</em> и <em>stream</em> применен квалификатор <kbd>restrict</kbd>.
<p class="tj">При успешном выполнении функция <kbd>fgets()</kbd>  возвращает значение <em>str</em>, а в случае сбоя — нулевой указатель. В случае ошибки содержимое массива, к которому отсылает  указатель <em>str</em>, не определено. Поскольку функция <kbd>fgets()</kbd> возвращает нулевой указатель и при возникновении ошибки, и при достижении конца файла, то для выяснения, что же произошло на самом деле, необходимо использовать функцию <kbd>feof()</kbd> или <kbd>ferror()</kbd>.
<h2>Пример</h2>
<p class="tj">Приведенная программа использует функцию <kbd>fgets()</kbd> для вывода содержимого текстового файла, имя которого задано первым аргументом командной строки.
<pre>
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
int main(int argc, char *argv[])
{
  FILE *fp;
  char str[128];
  if((fp=fopen(argv[1], "r"))==NULL) {
    printf("Не удается открыть файл.\n");
    exit(1);
  }
  while(!feof(fp)) {
    if(fgets(str, 126, fp)) printf("%s", str);
  }
  fclose(fp);
  return 0;
}
</pre>
<h2>Зависимые функции</h2>
<a href="fputs.htm">fputs()</a>  <a href="fgetc.htm">fgetc()</a>  <a href="gets.htm">gets()</a>  <a href="puts.htm">puts()</a>
<hr><a href="../main.htm#13">Содержание</a> | <a href="13.htm#00">Глава 13</a>


</body></html>
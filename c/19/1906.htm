<!DOCTYPE HTML>
<html lang="ru">
<head>
<title>Функции для преобразования многобайтовых и двухбайтовых символов - cправочник по Си</title>
<meta charset="utf-8">
<link rel="stylesheet" href="../work/css.css">
</head><body>
<a href="../main.htm#19">Содержание</a> | <a href="1905.htm">&lt;&lt;&lt;</a> | <a href="../20/20.htm">&gt;&gt;&gt;</a><hr>
<h1>Функции для преобразования многобайтовых и двухбайтовых символов</h1>
<p class="tj">Стандартная библиотека поддерживает различные функции, предназначенные для преобразования многобайтовых и двухбайтовых символов. Эти функции (перечисленные в табл. 19.6) используют заголовок <kbd>&lt;wchar.h&gt;</kbd>. Многие из них представляют собой версии обычных многобайтовых функций, которые могут быть прерваны (и повторно запущены — restartable). Повторно запускаемая версия используя информацию о состоянии, передаваемую ей в параметре типа <kbd>mbstate_t</kbd>. Если этот параметр нулевой, функция предоставит собственный объект типа <kbd>mbstate_t</kbd>.</p>
<table class="table table-bordered">
<caption><strong>Таблица 19.6. Функции для преобразования многобайтовых и двухбайтовых символов</strong></caption>
<tr><th><em>Функция</em><th><em>Описание</em>
<tr><td><pre>win_t btowc(int <em>ch</em>)</pre><td class="tj">Преобразует параметр <em>ch</em> в его двухбайтовый эквивалент и возвращает результат. Значение <kbd>WEOF</kbd> возвращается при ошибке или если <em>ch</em> не однобайтовый, а многобайтовый символ
<tr><td><pre>size_t mbrlen(
  const char *<em>str</em>,
  size_t <em>num</em>,
  mbstate_t *<em>state</em>)</pre><td class="tj">Повторно запускаемая версия функции <kbd>mblen()</kbd>, в которой информация о состоянии передается через параметр <em>state</em>. Возвращает положительное число, равное длине следующее	многобайтового символа. Нуль возвращается в случае, если следующий символ — нулевой. При ошибке возвращается отрицательное значение. В версии С99 к параметрам <em>str</em> и <em>state</em> применен квалификатор <kbd>restrict</kbd>
<tr><td><pre>size_t mbrtowc(
  wchar_t *<em>out</em>,
  const char *<em>in</em>,
  size_t <em>num</em>,
  mbstate_t *<em>state</em>)</pre><td class="tj">Повторно запускаемая версия функции <kbd>mbtowc()</kbd>, в которой информация о состоянии передается через параметр <em>state</em>. Возвращает положительное число, равное длине следующего многобайтового символа. Нуль возвращается в случае, если следующий символ — нулевой. При ошибке возвращается значение -1 и переменной <kbd>errno</kbd> присваивается макрос <kbd>EILSEQ</kbd>. Если преобразование не завершено, возвращается число -2. В версии С99 к параметрам <em>out</em>, <em>in</em> и <em>state</em> применен квалификатор <kbd>restrict</kbd>
<tr><td><pre>int mbsinit(
  const mbstate_t *<em>state</em>)</pre><td class="tj">Возвращает значение <kbd>true</kbd>, если параметр <em>state</em> представляет начальное состояние процесса преобразования
<tr><td><pre>size_t mbsrtowcs(
  wchar_t *<em>out</em>,
  const char **<em>in</em>,
  size_t <em>num</em>,
  mbstate_t *<em>state</em>)</pre><td class="tj">Повторно запускаемая версия функции <kbd>mbstowcs()</kbd>, в которой информация о состоянии передается через параметр <em>state</em>. Кроме того, функция <kbd>mbsrtowcs()</kbd> отличается от функции <kbd>mbstowcs()</kbd> тем, что параметр <em>in</em> является косвенным указателем на исходный массив. При ошибке переменной <kbd>errno</kbd> присваивается макрос <kbd>EILSEQ</kbd>. В версии С99 к параметрам <em>out</em>, <em>in</em> и <em>state</em> применен квалификатор <kbd>restrict</kbd>
<tr><td><pre>size_t wcrtomb(
  char *<em>out</em>,
  wchar_t <em>ch</em>,
  mbstate_t *<em>state</em>)</pre><td class="tj">Повторно запускаемая версия функции <kbd>wctomb()</kbd>, в которой информация о состоянии передается через параметр <em>state</em>. При ошибке переменной <kbd>errno</kbd> присваивается макрос <kbd>EILSEQ</kbd>. В версии С99 к параметрам <em>out</em> и <em>state</em> применен квалификатор <kbd>restrict</kbd>
<tr><td><pre>size_t wcsrtombs(
  char *<em>out</em>,
  const wchar_t **<em>in</em>,
  size_t <em>num</em>,
  mbstate_t *<em>state</em>)</pre><td class="tj">Повторно запускаемая версия функции <kbd>wcstombs()</kbd>, в которой информация о состоянии передается через параметр <em>state</em>. Кроме того, функция <kbd>wcsrtombs()</kbd> отличается от функции <kbd>wcstombs()</kbd> тем, что параметр <em>in</em> является косвенный указателем на исходный массив. При ошибке переменной <kbd>errno</kbd> присваивается макрос <kbd>EILSEQ</kbd>. В версии С99 к параметрам <em>out</em>, <em>in</em> и <em>state</em> применен квалификатор <kbd>restrict</kbd>
<tr><td><pre>int wctob(wint_t <em>ch</em>)</pre><td class="tj">Преобразует параметр <em>ch</em> в его однобайтовый эквивалент. При сбое функция возвращает значение <kbd>EOF</kbd>
</table>
<p>
</p>
<hr><a href="../main.htm#19">Содержание</a> | <a href="1905.htm">&lt;&lt;&lt;</a> | <a href="../20/20.htm">&gt;&gt;&gt;</a>
</body>
</html>

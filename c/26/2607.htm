<!DOCTYPE HTML>
<html lang="ru">
<head>
<title>Файл описания больше не нужен - cправочник по Си</title>
<meta charset="utf-8">
<link rel="stylesheet" href="../work/css.css">
</head><body>
<a href="../main.htm#26">Содержание</a> | <a href="2606.htm">&lt;&lt;&lt;</a> | <a href="2608.htm">&gt;&gt;&gt;</a><hr>
<h1>Файл описания больше не нужен</h1>
<p class="tj">Если вам приходилось создавать 16-разрядные программы для Windows, то вы помните, что при этом необходимо было использовать еще и <em>файлы описаний</em> (<em>definition files</em>). Что касается 16-разрядных версий Windows, все программы должны были иметь сопутствующие файлы описаний. Файл описаний — это просто текстовый файл, который задает определенную информацию и параметры, которые необходимо указывать для 16-разрядной среды. Поскольку Windows 2000 имеет 32-разрядную архитектуру (а также другие усовершенствования), файлы описаний, как правило, не являются больше необходимым атрибутом для программ, работающих под управлением Windows 2000. Если вы новичок в программировании для Windows и не имеете никакого представления о файлах описаний, то следующий материал будет вам, конечно же, полезен.
<p class="tj">Все файлы описаний имеют расширение .DEF. Например, файл описаний для нашей программы-заготовки мог бы иметь название SKELL.DEF. Ниже приведен файл описания, который можно использовать для обеспечения нисходящей совместимости с Windows 3.1:
<pre>
DESCRIPTION 'Skeleton Program'
EXETYPE WINDOWS
CODE PRELOAD MOVEABLE DISCARDABLE
DATA PRELOAD MOVEABLE MULTIPLE
HEAPSIZE 8192
STACKSIZE 8192
EXPORTS WindowFunc
</pre>
<p class="tj">Приведенный файл определяет название программы и ее описание, причем оба эти параметра не являются обязательными. Здесь также формулируется утверждение, что исполняемый файл будет совместим с Windows (а не с DOS, например). Оператор <kbd>CODE</kbd> сообщает Windows 2000, что при запуске программы ее необходимо загрузить всю целиком (элемент PRELOAD), что код программы разрешается перемещать в памяти (элемент MOVEABLE) и что данный код может быть удален из памяти и загружен повторно, когда в этом возникнет необходимость (DISCARDABLE). К тому же, этот файл определяет то, что данные для прикладной программы должны быть загружены в самом начале ее выполнения, а также допускается их перемещение в другие области памяти. Здесь же устанавливается, что каждый экземпляр программы имеет свои собственные данные (MULTIPLE). Следующие строки сообщают, что программе выделяются динамически распределяемая область памяти (куча) и стек указанных размеров. И, наконец, указывается имя экспортируемой функции окна. Экспорт функции предоставляет возможность системе Windows 3.1 осуществлять ее вызов.
<p class="tj">Не забывайте, что файлы описаний редко используются в процессе программирования для 32-разрядных версий Windows.
<p>
</p>
<hr><a href="../main.htm#26">Содержание</a> | <a href="2606.htm">&lt;&lt;&lt;</a> | <a href="2608.htm">&gt;&gt;&gt;</a>
</body>
</html>
